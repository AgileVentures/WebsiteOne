---
http_interactions:
- request:
    method: post
    uri: https://api.sandbox.paypal.com/v1/oauth2/token
    body:
      encoding: UTF-8
      string: grant_type=client_credentials
    headers:
      User-Agent:
      - PayPalSDK/PayPal-Ruby-SDK 1.7.3 (paypal-sdk-core 1.7.3; ruby 2.5.1p57-x86_64-linux;OpenSSL
        1.0.2g  1 Mar 2016)
      Content-Type:
      - application/x-www-form-urlencoded
      Authorization:
      - "<AUTHORIZATION_HEADERS>"
      Paypal-Request-Id:
      - e14297ac-67e8-47e0-9645-2609eaf01c25
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 15 May 2019 18:50:28 GMT
      Server:
      - Apache
      Paypal-Debug-Id:
      - acdaf14e5406b
      - acdaf14e5406b
      X-Paypal-Token-Service:
      - IAAS
      Http-X-Pp-Az-Locator:
      - sandbox.slc
      Set-Cookie:
      - X-PP-SILOVER=; Expires=Thu, 01 Jan 1970 00:00:01 GMT
      - X-PP-SILOVER=name%3DSANDBOX3.API.1%26silo_version%3D1880%26app%3Dapiplatformproxyserv%26TIME%3D1952439388%26HTTP_X_PP_AZ_LOCATOR%3Dsandbox.slc;
        Expires=Wed, 15 May 2019 19:20:28 GMT; domain=.paypal.com; path=/; Secure;
        HttpOnly
      Vary:
      - Authorization
      Content-Length:
      - '918'
      Connection:
      - close
      Content-Type:
      - application/json
    body:
      encoding: UTF-8
      string: '{"scope":"https://uri.paypal.com/services/invoicing https://uri.paypal.com/services/disputes/read-buyer
        https://uri.paypal.com/services/payments/realtimepayment https://uri.paypal.com/services/disputes/update-seller
        https://uri.paypal.com/services/payments/payment/authcapture openid https://uri.paypal.com/services/disputes/read-seller
        https://uri.paypal.com/services/payments/refund https://api.paypal.com/v1/vault/credit-card
        https://api.paypal.com/v1/payments/.* https://uri.paypal.com/payments/payouts
        https://api.paypal.com/v1/vault/credit-card/.* https://uri.paypal.com/services/subscriptions
        https://uri.paypal.com/services/applications/webhooks","access_token":"A21AAEcfTkxiYwYyvACYjVJ8X8fzfeTr_5qTzlNRk84m9vz9_ohqWv0MnAJISi6Xn4u83FhAjA5llLwTm2RsILUodpoddXM2g","token_type":"Bearer","app_id":"APP-80W284485P519543T","expires_in":30218,"nonce":"2019-05-15T18:14:06ZDtuJC2qGk0w_M2dHWaYK8u3AukPO89iEDeK_XApaEdw"}'
    http_version: 
  recorded_at: Wed, 15 May 2019 18:50:28 GMT
- request:
    method: post
    uri: https://api.sandbox.paypal.com/v1/payments/billing-agreements/EC-4U870158WU919683B/agreement-execute
    body:
      encoding: UTF-8
      string: "{}"
    headers:
      Authorization:
      - "<AUTHORIZATION_HEADERS>"
      Content-Type:
      - application/json
      User-Agent:
      - PayPalSDK/PayPal-Ruby-SDK 1.7.3 (paypal-sdk-core 1.7.3; ruby 2.5.1p57-x86_64-linux;OpenSSL
        1.0.2g  1 Mar 2016)
      Paypal-Request-Id:
      - e14297ac-67e8-47e0-9645-2609eaf01c25
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Wed, 15 May 2019 18:50:29 GMT
      Server:
      - Apache
      Paypal-Debug-Id:
      - cdd3414f4c673
      - cdd3414f4c673
      Content-Language:
      - "*"
      Http-X-Pp-Az-Locator:
      - sandbox.slc
      Set-Cookie:
      - X-PP-SILOVER=; Expires=Thu, 01 Jan 1970 00:00:01 GMT
      - X-PP-SILOVER=name%3DSANDBOX3.API.1%26silo_version%3D1880%26app%3Dapiplatformproxyserv%26TIME%3D1969216604%26HTTP_X_PP_AZ_LOCATOR%3Dsandbox.slc;
        Expires=Wed, 15 May 2019 19:20:29 GMT; domain=.paypal.com; path=/; Secure;
        HttpOnly
      Vary:
      - Authorization
      Content-Length:
      - '1320'
      Connection:
      - close
      Content-Type:
      - application/json
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJpZCI6IkktOVNLSjlFMUo4OEhMIiwic3RhdGUiOiJBY3RpdmUiLCJkZXNjcmlwdGlvbiI6IlByZW1pdW0gTW9iIG1lbWJlcnNoaXAgZm9yIMKjMjUvbW9udGgiLCJzdGFydF9kYXRlIjoiMjAxOS0wNS0xN1QwNzowMDowMFoiLCJwYXllciI6eyJwYXltZW50X21ldGhvZCI6InBheXBhbCIsInN0YXR1cyI6InZlcmlmaWVkIiwicGF5ZXJfaW5mbyI6eyJlbWFpbCI6Im1hdHQrYnV5ZXJAYWdpbGV2ZW50dXJlcy5vcmciLCJmaXJzdF9uYW1lIjoiTWF0dGhldyIsImxhc3RfbmFtZSI6IlJpZGVyIiwicGF5ZXJfaWQiOiI2SEFYQTg2TTJOVkg4Iiwic2hpcHBpbmdfYWRkcmVzcyI6eyJyZWNpcGllbnRfbmFtZSI6Ik1hdHRoZXcgUmlkZXIiLCJsaW5lMSI6IjEgTWFpbiBTdCIsImNpdHkiOiJTYW4gSm9zZSIsInN0YXRlIjoiQ0EiLCJwb3N0YWxfY29kZSI6Ijk1MTMxIiwiY291bnRyeV9jb2RlIjoiVVMifX19LCJzaGlwcGluZ19hZGRyZXNzIjp7InJlY2lwaWVudF9uYW1lIjoiTWF0dGhldyBSaWRlciIsImxpbmUxIjoiMSBNYWluIFN0IiwiY2l0eSI6IlNhbiBKb3NlIiwic3RhdGUiOiJDQSIsInBvc3RhbF9jb2RlIjoiOTUxMzEiLCJjb3VudHJ5X2NvZGUiOiJVUyJ9LCJwbGFuIjp7InBheW1lbnRfZGVmaW5pdGlvbnMiOlt7InR5cGUiOiJSRUdVTEFSIiwiZnJlcXVlbmN5IjoiTW9udGgiLCJhbW91bnQiOnsidmFsdWUiOiIyNS4wMCJ9LCJjeWNsZXMiOiIxMiIsImNoYXJnZV9tb2RlbHMiOlt7InR5cGUiOiJUQVgiLCJhbW91bnQiOnsidmFsdWUiOiIwLjAwIn19LHsidHlwZSI6IlNISVBQSU5HIiwiYW1vdW50Ijp7InZhbHVlIjoiMC4wMCJ9fV0sImZyZXF1ZW5jeV9pbnRlcnZhbCI6IjEifV0sIm1lcmNoYW50X3ByZWZlcmVuY2VzIjp7InNldHVwX2ZlZSI6eyJ2YWx1ZSI6IjAuMDAifSwibWF4X2ZhaWxfYXR0ZW1wdHMiOiIwIiwiYXV0b19iaWxsX2Ftb3VudCI6IllFUyJ9LCJjdXJyZW5jeV9jb2RlIjoiR0JQIn0sImxpbmtzIjpbeyJocmVmIjoiaHR0cHM6Ly9hcGkuc2FuZGJveC5wYXlwYWwuY29tL3YxL3BheW1lbnRzL2JpbGxpbmctYWdyZWVtZW50cy9JLTlTS0o5RTFKODhITCIsInJlbCI6InNlbGYiLCJtZXRob2QiOiJHRVQifV0sImFncmVlbWVudF9kZXRhaWxzIjp7Im91dHN0YW5kaW5nX2JhbGFuY2UiOnsidmFsdWUiOiIwLjAwIn0sImN5Y2xlc19yZW1haW5pbmciOiIxMiIsImN5Y2xlc19jb21wbGV0ZWQiOiIwIiwibmV4dF9iaWxsaW5nX2RhdGUiOiIyMDE5LTA1LTE3VDEwOjAwOjAwWiIsImZpbmFsX3BheW1lbnRfZGF0ZSI6IjIwMjAtMDQtMTdUMTA6MDA6MDBaIiwiZmFpbGVkX3BheW1lbnRfY291bnQiOiIwIn19
    http_version: 
  recorded_at: Wed, 15 May 2019 18:50:29 GMT
- request:
    method: post
    uri: https://api.sandbox.paypal.com/v1/payments/billing-agreements/premium/agreement-execute
    body:
      encoding: UTF-8
      string: "{}"
    headers:
      Authorization:
      - "<AUTHORIZATION_HEADERS>"
      Content-Type:
      - application/json
      User-Agent:
      - PayPalSDK/PayPal-Ruby-SDK 1.7.3 (paypal-sdk-core 1.7.3; ruby 2.5.1p57-x86_64-linux;OpenSSL
        1.0.2g  1 Mar 2016)
      Paypal-Request-Id:
      - 1a605a06-0d53-434f-bc8e-d79e207ea5ed
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
  response:
    status:
      code: 400
      message: Bad Request
    headers:
      Date:
      - Wed, 15 May 2019 19:09:08 GMT
      Server:
      - Apache
      Paypal-Debug-Id:
      - 6f189a38de8b2
      - 6f189a38de8b2
      Content-Language:
      - "*"
      Connection:
      - close
      Http-X-Pp-Az-Locator:
      - sandbox.slc
      Set-Cookie:
      - X-PP-SILOVER=; Expires=Thu, 01 Jan 1970 00:00:01 GMT
      - X-PP-SILOVER=name%3DSANDBOX3.API.1%26silo_version%3D1880%26app%3Dapiplatformproxyserv%26TIME%3D3563314268%26HTTP_X_PP_AZ_LOCATOR%3Dsandbox.slc;
        Expires=Wed, 15 May 2019 19:39:08 GMT; domain=.paypal.com; path=/; Secure;
        HttpOnly
      Vary:
      - Authorization
      Content-Length:
      - '263'
      Content-Type:
      - application/json
    body:
      encoding: UTF-8
      string: '{"name":"BUSINESS_VALIDATION_ERROR","details":[{"field":"validation_failure","issue":"Invalid
        Payment Token."}],"message":"Validation Error.","information_link":"https://developer.paypal.com/docs/api/payments.billing-agreements#errors","debug_id":"6f189a38de8b2"}'
    http_version: 
  recorded_at: Wed, 15 May 2019 19:09:09 GMT
recorded_with: VCR 4.0.0
