!function(e){(function(){window.Tags||(window.Tags={}),jQuery(function(){return e.tags=function(t,s){var n,a,i,r,g,o,u,l=this;null==s&&(s={});for(n in s)r=s[n],this[n]=r;if(this.bootstrapVersion||(this.bootstrapVersion="3"),this.readOnly||(this.readOnly=!1),this.suggestions||(this.suggestions=[]),this.restrictTo=null!=s.restrictTo?s.restrictTo.concat(this.suggestions):!1,this.exclude||(this.exclude=!1),this.displayPopovers=null!=s.popovers?!0:null!=s.popoverData,this.popoverTrigger||(this.popoverTrigger="hover"),this.tagClass||(this.tagClass="btn-info"),this.tagSize||(this.tagSize="md"),this.promptText||(this.promptText="Enter tags..."),this.caseInsensitive||(this.caseInsensitive=!1),this.readOnlyEmptyMessage||(this.readOnlyEmptyMessage="No tags to display..."),this.beforeAddingTag||(this.beforeAddingTag=function(){}),this.afterAddingTag||(this.afterAddingTag=function(){}),this.beforeDeletingTag||(this.beforeDeletingTag=function(){}),this.afterDeletingTag||(this.afterDeletingTag=function(){}),this.definePopover||(this.definePopover=function(e){return'associated content for "'+e+'"'}),this.excludes||(this.excludes=function(){return!1}),this.tagRemoved||(this.tagRemoved=function(){}),this.pressedReturn||(this.pressedReturn=function(){}),this.pressedDelete||(this.pressedDelete=function(){}),this.pressedDown||(this.pressedDown=function(){}),this.pressedUp||(this.pressedUp=function(){}),this.$element=e(t),null!=s.tagData?this.tagsArray=s.tagData:(i=e(".tag-data",this.$element).html(),this.tagsArray=null!=i?i.split(","):[]),s.popoverData)this.popoverArray=s.popoverData;else for(this.popoverArray=[],u=this.tagsArray,g=0,o=u.length;o>g;g++)a=u[g],this.popoverArray.push(null);return this.getTags=function(){return l.tagsArray},this.getTagsContent=function(){return l.popoverArray},this.getTagsWithContent=function(){var e,t,s,n;for(e=[],t=s=0,n=l.tagsArray.length-1;n>=0?n>=s:s>=n;t=n>=0?++s:--s)e.push({tag:l.tagsArray[t],content:l.popoverArray[t]});return e},this.getTag=function(e){var t;return t=l.tagsArray.indexOf(e),t>-1?l.tagsArray[t]:null},this.getTagWithContent=function(e){var t;return t=l.tagsArray.indexOf(e),{tag:l.tagsArray[t],content:l.popoverArray[t]}},this.hasTag=function(e){return l.tagsArray.indexOf(e)>-1},this.removeTagClicked=function(t){return"A"===t.currentTarget.tagName&&(l.removeTag(e("span",t.currentTarget.parentElement).html()),e(t.currentTarget.parentNode).remove()),l},this.removeLastTag=function(){return l.removeTag(l.tagsArray[l.tagsArray.length-1]),l},this.removeTag=function(e){if(l.tagsArray.indexOf(e)>-1){if(l.beforeDeletingTag(e)===!1)return;l.popoverArray.splice(l.tagsArray.indexOf(e),1),l.tagsArray.splice(l.tagsArray.indexOf(e),1),l.renderTags(),l.afterDeletingTag(e)}return l},this.addTag=function(e){var t;if((l.restrictTo===!1||-1!==l.restrictTo.indexOf(e))&&l.tagsArray.indexOf(e)<0&&e.length>0&&(l.exclude===!1||-1===l.exclude.indexOf(e))&&!l.excludes(e)){if(l.beforeAddingTag(e)===!1)return;t=l.definePopover(e),l.popoverArray.push(t||null),l.tagsArray.push(e),l.afterAddingTag(e),l.renderTags()}return l},this.addTagWithContent=function(e,t){if((l.restrictTo===!1||-1!==l.restrictTo.indexOf(e))&&l.tagsArray.indexOf(e)<0&&e.length>0){if(l.beforeAddingTag(e)===!1)return;l.tagsArray.push(e),l.popoverArray.push(t),l.afterAddingTag(e),l.renderTags()}return l},this.renameTag=function(e,t){return l.tagsArray[l.tagsArray.indexOf(e)]=t,l.renderTags(),l},this.setPopover=function(e,t){return l.popoverArray[l.tagsArray.indexOf(e)]=t,l.renderTags(),l},this.keyDownHandler=function(e){var t,s;switch(t=null!=e.keyCode?e.keyCode:e.which){case 13:return l.pressedReturn(e),a=e.target.value,-1!==l.suggestedIndex&&(a=l.suggestionList[l.suggestedIndex]),l.addTag(a),e.target.value="",l.renderTags(),l.hideSuggestions();case 46:case 8:if(l.pressedDelete(e),""===e.target.value&&l.removeLastTag(),1===e.target.value.length)return l.hideSuggestions();break;case 40:if(l.pressedDown(e),""!==l.input.val()||-1!==l.suggestedIndex&&null!=l.suggestedIndex||l.makeSuggestions(e,!0),s=l.suggestionList.length,l.suggestedIndex=l.suggestedIndex<s-1?l.suggestedIndex+1:s-1,l.selectSuggested(l.suggestedIndex),l.suggestedIndex>=0)return l.scrollSuggested(l.suggestedIndex);break;case 38:if(l.pressedUp(e),l.suggestedIndex=l.suggestedIndex>0?l.suggestedIndex-1:0,l.selectSuggested(l.suggestedIndex),l.suggestedIndex>=0)return l.scrollSuggested(l.suggestedIndex);break;case 9:case 27:return l.hideSuggestions(),l.suggestedIndex=-1}},this.keyUpHandler=function(e){var t;return t=null!=e.keyCode?e.keyCode:e.which,40!==t&&38!==t&&27!==t?l.makeSuggestions(e,!1):void 0},this.getSuggestions=function(t,s){var n=this;return this.caseInsensitive&&(t=t.toLowerCase()),this.suggestionList=[],e.each(this.suggestions,function(e,a){var i;return i=n.caseInsensitive?a.substring(0,t.length):a.substring(0,t.length).toLowerCase(),n.tagsArray.indexOf(a)<0&&i===t&&(t.length>0||s)?n.suggestionList.push(a):void 0}),this.suggestionList},this.makeSuggestions=function(t,s){var n;return n=null!=t.target.value?t.target.value:t.target.textContent,l.suggestedIndex=-1,l.$suggestionList.html(""),e.each(l.getSuggestions(n,s),function(e,t){return l.$suggestionList.append(l.template("tags_suggestion",{suggestion:t}))}),l.$(".tags-suggestion").mouseover(l.selectSuggestedMouseOver),l.$(".tags-suggestion").click(l.suggestedClicked),l.suggestionList.length>0?l.showSuggestions():l.hideSuggestions()},this.suggestedClicked=function(e){return a=e.target.textContent,-1!==l.suggestedIndex&&(a=l.suggestionList[l.suggestedIndex]),l.addTag(a),l.input.val(""),l.makeSuggestions(e,!1),l.input.focus(),l.hideSuggestions()},this.hideSuggestions=function(){return l.$(".tags-suggestion-list").css({display:"none"})},this.showSuggestions=function(){return l.$(".tags-suggestion-list").css({display:"block"})},this.selectSuggestedMouseOver=function(t){return e(".tags-suggestion").removeClass("tags-suggestion-highlighted"),e(t.target).addClass("tags-suggestion-highlighted"),e(t.target).mouseout(l.selectSuggestedMousedOut),l.suggestedIndex=l.$(".tags-suggestion").index(e(t.target))},this.selectSuggestedMousedOut=function(t){return e(t.target).removeClass("tags-suggestion-highlighted")},this.selectSuggested=function(t){var s;return e(".tags-suggestion").removeClass("tags-suggestion-highlighted"),s=l.$(".tags-suggestion").eq(t),s.addClass("tags-suggestion-highlighted")},this.scrollSuggested=function(e){var t,s,n,a;return s=l.$(".tags-suggestion").eq(e),n=l.$(".tags-suggestion").eq(0),t=s.position(),a=n.position(),null!=t?l.$(".tags-suggestion-list").scrollTop(t.top-a.top):void 0},this.adjustInputPosition=function(){var t,s,n,a,i,r;return i=l.$(".tag").last(),r=i.position(),s=null!=r?r.left+i.outerWidth(!0):0,n=null!=r?r.top:0,a=l.$element.width()-s,e(".tags-input",l.$element).css({paddingLeft:Math.max(s,0),paddingTop:Math.max(n,0),width:a}),t=null!=r?r.top+i.outerHeight(!0):22,l.$element.css({paddingBottom:t-l.$element.height()})},this.renderTags=function(){var t;return t=l.$(".tags"),t.html(""),l.input.attr("placeholder",0===l.tagsArray.length?l.promptText:""),e.each(l.tagsArray,function(s,n){return n=e(l.formatTag(s,n)),e("a",n).click(l.removeTagClicked),e("a",n).mouseover(l.toggleCloseColor),e("a",n).mouseout(l.toggleCloseColor),l.displayPopovers&&l.initializePopoverFor(n,l.tagsArray[s],l.popoverArray[s]),t.append(n)}),l.adjustInputPosition()},this.renderReadOnly=function(){var t;return t=l.$(".tags"),t.html(0===l.tagsArray.length?l.readOnlyEmptyMessage:""),e.each(l.tagsArray,function(s,n){return n=e(l.formatTag(s,n,!0)),l.displayPopovers&&l.initializePopoverFor(n,l.tagsArray[s],l.popoverArray[s]),t.append(n)})},this.initializePopoverFor=function(t,n,a){return s={title:n,content:a,placement:"bottom"},"hoverShowClickHide"===l.popoverTrigger?(e(t).mouseover(function(){return e(t).popover("show"),e(".tag").not(t).popover("hide")}),e(document).click(function(){return e(t).popover("hide")})):s.trigger=l.popoverTrigger,e(t).popover(s)},this.toggleCloseColor=function(t){var s,n;return n=e(t.currentTarget),s=n.css("opacity"),s=.8>s?1:.6,n.css({opacity:s})},this.formatTag=function(e,t,s){var n;return null==s&&(s=!1),n=t.replace("<","&lt;").replace(">","&gt;"),l.template("tag",{tag:n,tagClass:l.tagClass,isPopover:l.displayPopovers,isReadOnly:s,tagSize:l.tagSize})},this.addDocumentListeners=function(){return e(document).mouseup(function(e){var t;return t=l.$(".tags-suggestion-list"),0===t.has(e.target).length?l.hideSuggestions():void 0})},this.template=function(e,t){return Tags.Templates.Template(this.getBootstrapVersion(),e,t)},this.$=function(t){return e(t,this.$element)},this.getBootstrapVersion=function(){return Tags.bootstrapVersion||this.bootstrapVersion},this.initializeDom=function(){return this.$element.append(this.template("tags_container"))},this.init=function(){return this.$element.addClass("bootstrap-tags").addClass("bootstrap-"+this.getBootstrapVersion()),this.initializeDom(),this.readOnly?(this.renderReadOnly(),this.removeTag=function(){},this.removeTagClicked=function(){},this.removeLastTag=function(){},this.addTag=function(){},this.addTagWithContent=function(){},this.renameTag=function(){},this.setPopover=function(){}):(this.input=e(this.template("input",{tagSize:this.tagSize})),this.input.keydown(this.keyDownHandler),this.input.keyup(this.keyUpHandler),this.$element.append(this.input),this.$suggestionList=e(this.template("suggestion_list")),this.$element.append(this.$suggestionList),this.renderTags(),this.addDocumentListeners())},this.init(),this},e.fn.tags=function(t){var s,n;return n={},s="number"==typeof t?t:-1,this.each(function(a,i){var r;return r=e(i),null==r.data("tags")&&r.data("tags",new e.tags(this,t)),s===a||0===a?n=r.data("tags"):void 0}),n}})}).call(this),function(){window.Tags||(window.Tags={}),Tags.Helpers||(Tags.Helpers={}),Tags.Helpers.addPadding=function(e,t,s){return null==t&&(t=1),null==s&&(s=!0),s?0===t?e:Tags.Helpers.addPadding("&nbsp"+e+"&nbsp",t-1):e}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)["2"]||(e["2"]={}),Tags.Templates["2"].input=function(e){var t;return null==e&&(e={}),t=function(){switch(e.tagSize){case"sm":return"small";case"md":return"medium";case"lg":return"large"}}(),"<input type='text' class='tags-input input-"+t+"' />"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)["2"]||(e["2"]={}),Tags.Templates["2"].tag=function(e){return null==e&&(e={}),"<div class='tag label "+e.tagClass+" "+e.tagSize+"' "+(e.isPopover?"rel='popover'":"")+">    <span>"+Tags.Helpers.addPadding(e.tag,2,e.isReadOnly)+"</span>    "+(e.isReadOnly?"":"<a><i class='remove icon-remove-sign icon-white' /></a>")+"  </div>"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)["3"]||(e["3"]={}),Tags.Templates["3"].input=function(e){return null==e&&(e={}),"<input type='text' class='form-control tags-input input-"+e.tagSize+"' />"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)["3"]||(e["3"]={}),Tags.Templates["3"].tag=function(e){return null==e&&(e={}),"<div class='tag label "+e.tagClass+" "+e.tagSize+"' "+(e.isPopover?"rel='popover'":"")+">    <span>"+Tags.Helpers.addPadding(e.tag,2,e.isReadOnly)+"</span>    "+(e.isReadOnly?"":"<a><i class='remove glyphicon glyphicon-remove-sign glyphicon-white' /></a>")+"  </div>"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates).shared||(e.shared={}),Tags.Templates.shared.suggestion_list=function(e){return null==e&&(e={}),'<ul class="tags-suggestion-list dropdown-menu"></ul>'}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates).shared||(e.shared={}),Tags.Templates.shared.tags_container=function(e){return null==e&&(e={}),'<div class="tags"></div>'}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates).shared||(e.shared={}),Tags.Templates.shared.tags_suggestion=function(e){return null==e&&(e={}),"<li class='tags-suggestion'>"+e.suggestion+"</li>"}}.call(this),function(){window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),Tags.Templates.Template=function(e,t,s){return null!=Tags.Templates[e]&&null!=Tags.Templates[e][t]?Tags.Templates[e][t](s):Tags.Templates.shared[t](s)}}.call(this)}(window.jQuery);